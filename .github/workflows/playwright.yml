name: Playwright Tests  
on:  
  push:  
    branches: [ main, master ]  
  pull_request:  
    branches: [ main, master ]  
  
jobs:  
  playwright:  
    name: 'Playwright Tests'  
    runs-on: ubuntu-latest  
    container:  
      image: mcr.microsoft.com/playwright/python:v1.44.0-jammy  
    steps:  
      - name: Checkout code  
        uses: actions/checkout@v3  
  
      - name: Set up Python  
        uses: actions/setup-python@v3  
        with:  
          python-version: '3.11'  
  
      # 如果您的测试依赖于特定的环境变量，您可以在这里设置它们  
      - name: Set environment variables  
        run: |  
          echo "MY_ENV_VARIABLE=my_value" >> $GITHUB_ENV  
  
      - name: Install dependencies  
        run: |  
          python -m pip install --upgrade pip  
          pip install -r local-requirements.txt  
          pip install -e .  
  
      - name: Run Playwright tests  
        run: pytest # 如果您有pytest参数（例如特定文件、目录或标记），请在这里添加它们  
        env:  
          # 通常，在Docker容器内不需要设置HOME，但如果测试需要访问特定于HOME的配置或数据，可以添加  
          # HOME: /root  
          # 添加其他测试可能需要的任何环境变量  
          PLAYWRIGHT_BROWSERS_PATH: '/root/.cache/ms-playwright' # Playwright 默认的浏览器缓存路径  
  
# 注意：如果测试需要特定的浏览器或浏览器版本，您可能需要在Docker容器内或通过其他方式配置它们
